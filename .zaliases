# Aliases for Zsh (macOS optimized, with Omarchy-inspired tools)

# Directory navigation with zoxide (smarter cd) - with fallbacks
if command -v zoxide &> /dev/null; then
    alias cd='z'
    alias ..='z ..'
    alias ...='z ../..'
    alias ....='z ../../..'
    alias .....='z ../../../..'
else
    alias ..='cd ..'
    alias ...='cd ../..'
    alias ....='cd ../../..'
    alias .....='cd ../../../..'
fi

# File listing with eza (replaces ls) - with fallbacks
if command -v eza &> /dev/null; then
    alias ls='eza -lh --group-directories-first --icons=auto --color=always'
    alias lsa='eza -lha --group-directories-first --icons=auto --color=always'
    alias l='eza -G --color=always --group-directories-first'
    alias ll='eza -l --color=always --group-directories-first'
    alias la='eza -la --color=always --group-directories-first'
    alias lt='eza --tree --level=2 --long --icons=auto --git'
    alias lta='eza --tree --level=2 --long --icons=auto --git -a'
else
    alias ls='ls -lh --color=always'
    alias lsa='ls -lha --color=always'
    alias l='ls --color=always'
    alias ll='ls -l --color=always'
    alias la='ls -la --color=always'
    alias lt='find . -type d -maxdepth 2 | head -20'
    alias lta='find . -maxdepth 2 | head -20'
fi

# File searching and preview - with fallbacks
if command -v rg &> /dev/null; then
    alias search='rg --files-with-matches'
elif command -v ripgrep &> /dev/null; then
    alias rg='ripgrep --color=auto'
    alias search='ripgrep --files-with-matches'
else
    alias rg='grep -r --color=auto'
    alias search='grep -r -l'
fi

if command -v fzf &> /dev/null; then
    if command -v bat &> /dev/null; then
        alias fzf_preview='fzf --preview "bat --style=numbers --color=always --line-range :500 {}"'
        alias fzh='history | fzf'
    else
        alias fzf_preview='fzf --preview "cat {}"'
        alias fzh='history | fzf'
    fi
fi

# Handle fd vs fdfind naming - use fdcmd to avoid conflict with finddir function
if command -v fd &> /dev/null; then
    alias fdcmd='fd'
elif command -v fdfind &> /dev/null; then
    alias fdcmd='fdfind'
else
    alias fdcmd='find . -name'
fi

# File viewing with bat (enhanced cat) - with fallbacks
if command -v bat &> /dev/null; then
    alias cat='bat --style=auto'
    alias preview='bat --style=numbers --color=always'
elif command -v batcat &> /dev/null; then
    alias bat='batcat'
    alias cat='batcat --style=auto'
    alias preview='batcat --style=numbers --color=always'
fi

# General shell utilities
alias python='python3'
alias password="openssl rand -base64 32"
alias cls='clear'
alias reload="exec $SHELL -l"
alias x="exit"

# Memory and disk usage for macOS
if [[ "$OSTYPE" == "darwin"* ]]; then
    alias free="vm_stat | awk '/Pages free/ {print \"Free: \" \$3*4096/1024/1024 \"MB\"}'"
fi
alias df='df -h'

# Networking tools
alias wget="curl -O"  # Use curl instead of wget
alias ping="ping -c 5"  # Ping with 5 packets only
alias nmap-fast="nmap -T4 -F"  # Quick network scan
if [[ "$OSTYPE" == "darwin"* ]]; then
    alias ports="lsof -i -P -n"  # macOS: Show open ports
else
    alias ports="netstat -tuln"  # Linux: Show open ports
fi

# Editor (prefer nvim if installed)
if command -v nvim &> /dev/null; then
    alias vi='nvim'
    alias vim='nvim'
    n() { if [ "$#" -eq 0 ]; then nvim .; else nvim "$@"; fi; }
else
    n() { if [ "$#" -eq 0 ]; then vim .; else vim "$@"; fi; }
fi

# Development tools
alias g='git'
command -v docker &> /dev/null && alias d='docker'
command -v rails &> /dev/null && alias r='rails'
command -v lazygit &> /dev/null && alias lzg='lazygit'
command -v lazydocker &> /dev/null && alias lzd='lazydocker'

# Git aliases
alias gcm='git commit -m'
alias gcam='git commit -a -m'
alias gcad='git commit -a --amend'

# Zellij session management (fuzzy switching) - only if tools are available
if command -v zellij &> /dev/null && command -v fzf &> /dev/null; then
    alias zj='zellij list-sessions | fzf | cut -d" " -f1 | xargs zellij attach'
    alias zjk='zellij kill-session $(zellij list-sessions | fzf | cut -d" " -f1)'
fi

# SSH tools - prefer Homebrew versions over system versions (macOS)
if [[ "$OSTYPE" == "darwin"* ]] && [[ -d "/opt/homebrew/bin" ]]; then
    alias ssh='/opt/homebrew/bin/ssh'
    alias ssh-keygen='/opt/homebrew/bin/ssh-keygen'
    alias ssh-copy-id='/opt/homebrew/bin/ssh-copy-id'
    alias ssh-add='/opt/homebrew/bin/ssh-add'
    alias ssh-agent='/opt/homebrew/bin/ssh-agent'
    alias scp='/opt/homebrew/bin/scp'
    alias sftp='/opt/homebrew/bin/sftp'
fi

# EZA Enviroment Variable
# export EZA_COLORS="di=38;5;110:hd=38;5;117;1:ex=38;5;73;1:fi=90:ln=38;5;117;4:or=38;5;167;4:*.txt=38;5;139:*.md=38;5;139;3:*.zip=38;5;117:*.jpg=38;5;117:*.png=38;5;117:uu=90:gu=90:da=90:sn=90:gm=38;5;107:gd=38;5;167:xx=90:lp=38;5;117;4:cc=90"
# export EZA_COLORS="di=38;5;214:hd=38;5;214;1:ex=97;1:fi=90:ln=97;4:or=91;4:*.txt=38;5;214:*.md=38;5;214;3:*.zip=97:*.jpg=97:*.png=97:uu=90:gu=90:da=90:sn=90:gm=97:gd=91:xx=90:lp=97;4:cc=90"

# Zellij Session Management
# =========================
# Simple aliases for managing Zellij terminal multiplexer sessions

# List all Zellij sessions
alias zls='zellij list-sessions'

# Attach to a Zellij session
alias za='zellij attach'

# Create a new named Zellij session
alias znew='zellij --session'

# Clean up script (run from dotfiles/scripts directory)
if [[ -f ~/dotfiles/scripts/cleanup-zellij.sh ]]; then
    alias zclean='~/dotfiles/scripts/cleanup-zellij.sh --clean'
fi
